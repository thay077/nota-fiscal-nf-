<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sistema de Nota Fiscal</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #d0e8ff;
    margin: 0;
    padding: 0;
  }
  .container {
    max-width: 900px;
    margin: 30px auto;
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 10px #a3c0ff;
    min-height: 600px;
  }
  h1, h2 {
    color: #2a6ebb;
    margin-bottom: 15px;
  }
  label {
    display: block;
    margin-top: 10px;
    color: #2a6ebb;
    font-weight: bold;
  }
  input[type=text], input[type=password], input[type=number] {
    width: 100%;
    padding: 7px;
    margin-top: 5px;
    border: 1px solid #2a6ebb;
    border-radius: 4px;
    box-sizing: border-box;
  }
  button {
    margin-top: 15px;
    padding: 10px 15px;
    background: #2a6ebb;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background: #144a88;
  }
  nav {
    margin-bottom: 20px;
  }
  nav button {
    margin-right: 10px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  th, td {
    border: 1px solid #2a6ebb;
    padding: 8px;
    text-align: left;
  }
  th {
    background: #a3c0ff;
  }
  .hidden {
    display: none;
  }
  .nota {
    border: 2px solid #2a6ebb;
    padding: 15px;
    margin-top: 20px;
    border-radius: 6px;
  }
</style>
</head>
<body>

<div class="container">

  <!-- Tela de Login -->
  <div id="loginScreen">
    <h1>Login</h1>
    <label for="user">Usuário:</label>
    <input type="text" id="user" placeholder="Digite o usuário" />
    <label for="pass">Senha:</label>
    <input type="password" id="pass" placeholder="Digite a senha" />
    <button onclick="login()">Entrar</button>
    <p id="loginMsg" style="color: red;"></p>

    <h2>Usuários Cadastrados</h2>
    <table>
      <thead>
        <tr><th>Usuário</th><th>Senha</th></tr>
      </thead>
      <tbody id="usuariosTabelaLogin">
        <!-- Será preenchido por JS -->
      </tbody>
    </table>
  </div>

  <!-- Tela principal -->
  <div id="mainScreen" class="hidden">
    <h1>Bem-vindo, <span id="userNameDisplay"></span>!</h1>

    <nav>
      <button onclick="showSection('nota')">Emitir Nota Fiscal</button>
      <button onclick="showSection('produtos')">Consultar Produtos</button>
      <button onclick="logout()">Sair</button>
    </nav>

    <!-- Emitir Nota -->
    <section id="nota" class="hidden">
      <h2>Emitir Nota Fiscal</h2>
      <label>Nome da Loja Emitente:</label>
      <input type="text" id="nomeLoja" />

      <label>Nome do Cliente:</label>
      <input type="text" id="nomeCliente" />

      <label>CPF do Cliente:</label>
      <input type="text" id="cpfCliente" placeholder="000.000.000-00" />

      <label>CNPJ do Cliente:</label>
      <input type="text" id="cnpjCliente" placeholder="00.000.000/0000-00" />

      <label>Endereço:</label>
      <input type="text" id="enderecoCliente" />

      <label>Produto:</label>
      <input type="text" id="produto" />

      <label>Quantidade:</label>
      <input type="number" id="quantidade" min="1" value="1" />

      <label>Valor Unitário (R$):</label>
      <input type="text" id="valor" placeholder="Ex: 12.50" />

      <button onclick="emitirNota()">Emitir Nota</button>

      <div id="notaEmitida" class="nota hidden"></div>
    </section>

    <!-- Consultar Produtos -->
    <section id="produtos" class="hidden">
      <h2>Consultar Produtos</h2>
      <label>Adicionar Produto:</label>
      <input type="text" id="novoProduto" placeholder="Nome do produto" />
      <button onclick="adicionarProduto()">Adicionar</button>

      <table id="tabelaProdutos">
        <thead>
          <tr><th>Produtos Cadastrados</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </div>

</div>

<script>
  // Usuários fixos (apenas para exibição)
  const usuarios = [
    { usuario: "admin", senha: "1234" },
    { usuario: "user1", senha: "abcd" },
    { usuario: "user2", senha: "xyz" }
  ];

  let produtos = [];

  // Preenche a tabela de usuários na tela de login
  function mostrarUsuariosTabelaLogin() {
    const tbody = document.getElementById("usuariosTabelaLogin");
    tbody.innerHTML = "";
    usuarios.forEach(u => {
      const tr = document.createElement("tr");
      const tdUser = document.createElement("td");
      tdUser.textContent = u.usuario;
      const tdPass = document.createElement("td");
      tdPass.textContent = u.senha;
      tr.appendChild(tdUser);
      tr.appendChild(tdPass);
      tbody.appendChild(tr);
    });
  }

  function login() {
    const userInput = document.getElementById("user").value.trim();
    const passInput = document.getElementById("pass").value.trim();

    if (!userInput || !passInput) {
      document.getElementById("loginMsg").innerText = "Digite usuário e senha para continuar.";
      return;
    }

    // Aceita qualquer usuário e senha, não valida contra lista

    document.getElementById("loginMsg").innerText = "";
    document.getElementById("loginScreen").classList.add("hidden");
    document.getElementById("mainScreen").classList.remove("hidden");
    document.getElementById("userNameDisplay").innerText = userInput;
    showSection("nota");
  }

  function logout() {
    document.getElementById("loginScreen").classList.remove("hidden");
    document.getElementById("mainScreen").classList.add("hidden");
    document.getElementById("user").value = "";
    document.getElementById("pass").value = "";
  }

  function showSection(sec) {
    document.getElementById("nota").classList.add("hidden");
    document.getElementById("produtos").classList.add("hidden");

    if (sec === "nota") {
      document.getElementById("nota").classList.remove("hidden");
    } else if (sec === "produtos") {
      document.getElementById("produtos").classList.remove("hidden");
      atualizarTabelaProdutos();
    }
  }

  function emitirNota() {
    const loja = document.getElementById("nomeLoja").value.trim();
    const cliente = document.getElementById("nomeCliente").value.trim();
    const cpf = document.getElementById("cpfCliente").value.trim();
    const cnpj = document.getElementById("cnpjCliente").value.trim();
    const endereco = document.getElementById("enderecoCliente").value.trim();
    const produto = document.getElementById("produto").value.trim();
    const quantidade = parseInt(document.getElementById("quantidade").value);
    const valorStr = document.getElementById("valor").value.trim();

    if (!loja || !cliente || (!cpf && !cnpj) || !endereco || !produto || !quantidade || !valorStr) {
      alert("Preencha todos os campos corretamente.");
      return;
    }

    const valor = parseFloat(valorStr.replace(",", "."));
    if (isNaN(valor)) {
      alert("Valor inválido.");
      return;
    }

    const total = quantidade * valor;
    const agora = new Date();
    const dataHora = agora.toLocaleString('pt-BR');

    const notaHtml = `
      <h3>Nota Fiscal Emitida</h3>
      <p><b>Emitida em:</b> ${dataHora}</p>
      <p><b>Loja Emitente:</b> ${loja}</p>
      <p><b>Cliente:</b> ${cliente}</p>
      <p><b>CPF:</b> ${cpf || "-"}</p>
      <p><b>CNPJ:</b> ${cnpj || "-"}</p>
      <p><b>Endereço:</b> ${endereco}</p>
      <p><b>Produto:</b> ${produto}</p>
      <p><b>Quantidade:</b> ${quantidade}</p>
      <p><b>Valor Unitário:</b> R$ ${valor.toFixed(2)}</p>
      <p><b>Total:</b> R$ ${total.toFixed(2)}</p>
    `;

    const divNota = document.getElementById("notaEmitida");
    divNota.innerHTML = notaHtml;
    divNota.classList.remove("hidden");
  }

  function adicionarProduto() {
    const novoProd = document.getElementById("novoProduto").value.trim();
    if (novoProd) {
      produtos.push(novoProd);
      document.getElementById("novoProduto").value = "";
      atualizarTabelaProdutos();
    }
  }

  function atualizarTabelaProdutos() {
    const tbody = document.querySelector("#tabelaProdutos tbody");
    tbody.innerHTML = "";
    produtos.forEach(prod => {
      const tr = document.createElement("tr");
      const td = document.createElement("td");
      td.textContent = prod;
      tr.appendChild(td);
      tbody.appendChild(tr);
    });
  }

  // Inicializa a tabela de usuários na tela de login
  mostrarUsuariosTabelaLogin();
</script>

</body>
</html>

